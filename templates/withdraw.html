{% extends "base.html" %}
{% block title %}Withdraw – BUY BIT{% endblock %}
{% block content %}
<div class="container">
  <!-- <div class="mb-3">
    <a class="btn btn-sm btn-outline-light" href="{{ url_for('dashboard') }}">← Back to dashboard</a>
  </div> -->

  <div class="glass-box p-4" style="max-width:640px; margin:0 auto;">
    <!-- <h5 class="mb-3">Withdraw</h5> -->
    <div class="d-flex justify-content-between align-items-center mb-2">
      <h5 class="m-0">Withdraw</h5>      
      <a class="btn btn-sm btn-outline-light" href="{{ url_for('dashboard') }}">← Back to dashboard</a>
    </div>
    <div class="text-white-50 mb-3">
      Balance: <span class="text-white">£{{ "%.2f"|format(balance or 0) }}</span>
      {% if paypal_email %} • PayPal: <code>{{ paypal_email }}</code>{% endif %}
    </div>

    <form method="post" action="{{ url_for('withdraw_submit') }}" class="d-flex gap-2">
      <input type="hidden" name="username" value="{{ username }}">
      <input class="form-control" name="amount" type="number" min="1" step="0.01" placeholder="Amount (GBP)" required>
      <button class="btn btn-outline-gold">Request payout</button>
    </form>

    <div class="text-white-50 small mt-2">
      * Manual review. Processing times may vary.
    </div>
  </div>
   <div class="glass-box p-4 mt-2" style="max-width:640px; margin:0 auto;">
    <h5>Your Withdrawal Requests</h5>
    <div class="table-responsive mb-4">
        <table class="table table-sm table-striped">
            <thead>
                <tr>
                    <th>Amount (£)</th>
                    <th>Status</th>
                    <th>Requested At</th>
                </tr>
            </thead>
            <tbody>
                {% for w in withdrawals %}
                <tr>
                    <td>£{{ "%.2f"|format(w.amount) }}</td>
                    <td>{{ w.status.title() }}</td>
                    <td>{{ w.created_at }}</td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="3">No withdrawal requests yet.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    </div>
  
</div>
{% endblock %}
